package com.awsp8.wizardry.Events;

import java.io.IOException;

import com.awsp8.wizardry.Info;
import com.awsp8.wizardry.Wizardry;
import com.awsp8.wizardry.registry.UpdateRegistry;

import net.minecraft.util.ChatComponentText;
import net.minecraft.util.EnumChatFormatting;
import cpw.mods.fml.common.Mod.EventHandler;
import cpw.mods.fml.common.eventhandler.SubscribeEvent;
import cpw.mods.fml.common.gameevent.PlayerEvent.PlayerLoggedInEvent;

public class PlayerLoginEventListener {

    @SubscribeEvent
    public void loginEvent(PlayerLoggedInEvent event){
    	ChatComponentText TYmsg = new ChatComponentText(EnumChatFormatting.DARK_AQUA + "Thank you for downloading Wizardry!");
    	
    	event.player.addChatMessage(TYmsg);
    	
    	if (Wizardry.checkForUpdates == true){
    		UpdateRegistry ur = new UpdateRegistry();
    		
    		ChatComponentText CheckingMsg = new ChatComponentText(EnumChatFormatting.GREEN + "Checking for updates...");
    		ChatComponentText UpdateFoundMsg = new ChatComponentText(EnumChatFormatting.GREEN + "Update Found! Version " + EnumChatFormatting.GOLD + "[" + newVersion);
    		
    		event.player.addChatMessage(CheckingMsg);
    		
    		try {
				if (ur.newVersion() == Info.VERSION)
					event.player.addChatMessage(UpdateFoundMsg);
			} catch (IOException e) {
				e.printStackTrace();
			}
    	}
    }
}
